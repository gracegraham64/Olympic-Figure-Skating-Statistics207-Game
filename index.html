<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Figure Skating Program</title>

<style>
body{margin:0;overflow:hidden;background:#111;font-family:Arial}
canvas{display:block}
#questionBox{
position:absolute;
top:50%;left:50%;
transform:translate(-50%,-50%);
background:white;padding:25px;border-radius:12px;
width:420px;display:none;
}
button{width:100%;margin:6px 0;padding:12px}
.screen{
position:absolute;top:50%;left:50%;
transform:translate(-50%,-50%);
color:white;text-align:center;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<div id="questionBox">
<h3 id="questionText"></h3>
<div id="choices"></div>
</div>

<div id="startScreen" class="screen">
<h1>Figure Skating Program</h1>
<p>Answer correctly to land the jump.</p>
<button onclick="startProgram()">Start</button>
</div>

<script>

/* ---------- CANVAS ---------- */

const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

function resize(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

/* ---------- ARENA BACKGROUND (SIDELINE VIEW) ---------- */

function drawArena(){

// arena lighting gradient
let g=ctx.createLinearGradient(0,0,0,canvas.height);
g.addColorStop(0,"#1a1a1a");
g.addColorStop(.5,"#2b2b2b");
g.addColorStop(1,"#444");
ctx.fillStyle=g;
ctx.fillRect(0,0,canvas.width,canvas.height);

// stands
let standHeight=canvas.height*0.45;
ctx.fillStyle="#3a3a3a";
ctx.fillRect(0,0,canvas.width,standHeight);

// crowd dots
for(let i=0;i<800;i++){
ctx.fillStyle=`hsl(${Math.random()*360},20%,${40+Math.random()*40}%)`;
ctx.fillRect(Math.random()*canvas.width,
Math.random()*standHeight,3,3);
}

// rink boards
ctx.fillStyle="#ffffff";
ctx.fillRect(0,standHeight,canvas.width,20);

// glass panels
ctx.strokeStyle="rgba(200,230,255,.4)";
for(let i=0;i<canvas.width;i+=80){
ctx.beginPath();
ctx.moveTo(i,standHeight);
ctx.lineTo(i,standHeight+20);
ctx.stroke();
}

// ice surface
let iceGrad=ctx.createLinearGradient(0,standHeight+20,0,canvas.height);
iceGrad.addColorStop(0,"#eaf7ff");
iceGrad.addColorStop(1,"#d6ecff");

ctx.fillStyle=iceGrad;
ctx.fillRect(0,standHeight+20,canvas.width,canvas.height);

// red center line
ctx.strokeStyle="rgba(255,0,0,.5)";
ctx.lineWidth=3;
ctx.beginPath();
ctx.moveTo(canvas.width/2,standHeight+20);
ctx.lineTo(canvas.width/2,canvas.height);
ctx.stroke();

return standHeight+20; // ice level
}

/* ---------- CLEANER FIGURE SKATER ---------- */

let iceLevel=0;

let skater={
x:canvas.width/2,
y:0,
rotation:0,
air:false,
fallen:false,
landingPose:false
};

function drawSkater(){

ctx.save();
ctx.translate(skater.x,skater.y);
ctx.rotate(skater.rotation*Math.PI/180);

// fall state
if(skater.fallen) ctx.rotate(Math.PI/2);

// shadow
ctx.fillStyle="rgba(0,0,0,.2)";
ctx.beginPath();
ctx.ellipse(0,45,20,6,0,0,Math.PI*2);
ctx.fill();

// dress
ctx.fillStyle="#ff2f92";
ctx.beginPath();
ctx.moveTo(0,-10);
ctx.lineTo(-22,35);
ctx.lineTo(22,35);
ctx.fill();

// torso
ctx.fillStyle="#ffd7c2";
ctx.fillRect(-7,-40,14,30);

// head
ctx.beginPath();
ctx.arc(0,-50,9,0,Math.PI*2);
ctx.fill();

// bun hair
ctx.fillStyle="#5a3a1a";
ctx.beginPath();
ctx.arc(0,-60,5,0,Math.PI*2);
ctx.fill();

// arms
ctx.strokeStyle="#ffd7c2";
ctx.lineWidth=4;
ctx.beginPath();
ctx.moveTo(0,-25);
ctx.lineTo(-30,-5);
ctx.moveTo(0,-25);
ctx.lineTo(30,-5);
ctx.stroke();

// legs
ctx.strokeStyle="#111";
ctx.lineWidth=5;
ctx.beginPath();
ctx.moveTo(0,35);
ctx.lineTo(0,70);

if(skater.landingPose){
ctx.moveTo(0,35);
ctx.lineTo(30,65);
}
ctx.stroke();

// blade
ctx.fillRect(-12,70,24,4);

ctx.restore();
}

/* ---------- PROGRAM ---------- */

const elements=["Axel","Salchow","Toe Loop","Loop","Lutz",
"Axel","Salchow","Toe Loop","Loop","Lutz"];

const questions=[
{q:"Percent within 1 SD?",choices:["68%","95%","99.7%","50%"],correct:0},
{q:"Percent within 2 SD?",choices:["68%","95%","75%","50%"],correct:1},
{q:"Percent within 3 SD?",choices:["90%","95%","99.7%","80%"],correct:2},
{q:"Mean=100 SD=10 → 68%?",choices:["90–110","80–120","70–130","95–105"],correct:0},
{q:"Mean=50 SD=5 → 95%?",choices:["45–55","40–60","35–65","48–52"],correct:1},
{q:"Empirical rule applies to?",choices:["Uniform","Normal","Skewed","Random"],correct:1},
{q:"Beyond 3 SD?",choices:["0.3%","32%","5%","10%"],correct:0},
{q:"Mean=70 SD=5 → 99.7%?",choices:["65–75","60–80","55–85","50–90"],correct:2},
{q:"Between 1–2 SD one side?",choices:["13.5%","34%","47.5%","2.5%"],correct:0},
{q:"Within 2 SD but outside 1 SD?",choices:["27%","13.5%","68%","95%"],correct:0}
];

let current=0;

/* ---------- START ---------- */

function startProgram(){
document.getElementById("startScreen").style.display="none";
nextJump();
}

/* ---------- SIMPLE JUMP ARC ---------- */

function nextJump(){
if(current>=10)return;
performJump();
}

function performJump(){

skater.fallen=false;
skater.landingPose=false;

let startY=iceLevel-70;
let peak=startY-200;

let duration=800;
let start=null;

function rise(time){
if(!start)start=time;
let p=(time-start)/duration;

if(p<1){
skater.y=startY-(startY-peak)*p;
skater.rotation=720*p;
requestAnimationFrame(rise);
}else{
skater.y=peak;
pauseForQuestion(); // pause in air
}
}
requestAnimationFrame(rise);
}

/* ---------- AIR PAUSE ---------- */

function pauseForQuestion(){
showQuestion();
}

/* ---------- QUESTIONS ---------- */

function showQuestion(){

let q=questions[current];

document.getElementById("questionText").innerText=
elements[current]+" Jump:\n"+q.q;

let c=document.getElementById("choices");
c.innerHTML="";

q.choices.forEach((choice,i)=>{
let b=document.createElement("button");
b.innerText=choice;
b.onclick=()=>answer(i);
c.appendChild(b);
});

document.getElementById("questionBox").style.display="block";
}

function answer(choice){
document.getElementById("questionBox").style.display="none";

if(choice===questions[current].correct){
landClean();
}else{
fall();
}

current++;
setTimeout(nextJump,2000);
}

/* ---------- LAND CLEAN ---------- */

function landClean(){

let ground=iceLevel-70;
let start=skater.y;
let t0=null;
let duration=600;

function down(t){
if(!t0)t0=t;
let p=(t-t0)/duration;

if(p<1){
skater.y=start+(ground-start)*p;
skater.rotation=0;
requestAnimationFrame(down);
}else{
skater.y=ground;
skater.landingPose=true;
}
}
requestAnimationFrame(down);
}

/* ---------- FALL ---------- */

function fall(){

let ground=iceLevel-70;
let start=skater.y;
let t0=null;
let duration=600;

function down(t){
if(!t0)t0=t;
let p=(t-t0)/duration;

if(p<1){
skater.y=start+(ground-start)*p;
skater.rotation=360*p;
requestAnimationFrame(down);
}else{
skater.y=ground;
skater.fallen=true;
}
}
requestAnimationFrame(down);
}

/* ---------- GAME LOOP ---------- */

function loop(){
iceLevel=drawArena();

if(skater.y===0) skater.y=iceLevel-70;

drawSkater();
requestAnimationFrame(loop);
}
loop();

</script>
</body>
</html>
