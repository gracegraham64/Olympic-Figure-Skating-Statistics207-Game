<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Figure Skating Program</title>

<style>
body{margin:0;overflow:hidden;background:#111;font-family:Arial;}

canvas{display:block}

#questionBox{
position:absolute;
top:50%;left:50%;
transform:translate(-50%,-50%);
background:white;
padding:25px;border-radius:12px;
width:420px;display:none;
}

button{width:100%;margin:6px 0;padding:12px;}

.screen{
position:absolute;top:50%;left:50%;
transform:translate(-50%,-50%);
color:white;text-align:center;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<div id="questionBox">
<h3 id="questionText"></h3>
<div id="choices"></div>
</div>

<div id="startScreen" class="screen">
<h1>Figure Skating Program</h1>
<p>Answer questions to land jumps.</p>
<button onclick="startProgram()">Start</button>
</div>

<script>

/* ---------- CANVAS ---------- */

const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

function resize(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

/* ---------- EMPTY RINK BACKGROUND ---------- */

function drawRink(){
ctx.fillStyle="#e8f4ff";
ctx.fillRect(0,0,canvas.width,canvas.height);

// boards
ctx.fillStyle="#fff";
ctx.fillRect(0,canvas.height-120,canvas.width,120);

// red center line
ctx.strokeStyle="red";
ctx.lineWidth=4;
ctx.beginPath();
ctx.moveTo(canvas.width/2,0);
ctx.lineTo(canvas.width/2,canvas.height);
ctx.stroke();

// faint skate scratches
ctx.strokeStyle="rgba(180,180,180,.3)";
for(let i=0;i<15;i++){
ctx.beginPath();
ctx.moveTo(Math.random()*canvas.width,Math.random()*canvas.height);
ctx.lineTo(Math.random()*canvas.width,Math.random()*canvas.height);
ctx.stroke();
}
}

/* ---------- DRAW SKATER ---------- */

let skater={
x:canvas.width/2,
y:canvas.height-150,
rotation:0,
legLift:false,
fallen:false
};

function drawSkater(){

ctx.save();
ctx.translate(skater.x,skater.y);
ctx.rotate(skater.rotation*Math.PI/180);

// fall state
if(skater.fallen){
ctx.rotate(Math.PI/2);
}

// dress
ctx.fillStyle="#d81b60";
ctx.beginPath();
ctx.moveTo(0,0);
ctx.lineTo(-20,50);
ctx.lineTo(20,50);
ctx.fill();

// body
ctx.fillStyle="#fdd";
ctx.fillRect(-6,-40,12,40);

// head
ctx.beginPath();
ctx.arc(0,-55,10,0,Math.PI*2);
ctx.fill();

// arms
ctx.strokeStyle="#fdd";
ctx.lineWidth=4;
ctx.beginPath();
ctx.moveTo(0,-30);
ctx.lineTo(-25,-10);
ctx.moveTo(0,-30);
ctx.lineTo(25,-10);
ctx.stroke();

// legs
ctx.strokeStyle="black";
ctx.lineWidth=5;
ctx.beginPath();

// skating leg
ctx.moveTo(0,50);
ctx.lineTo(0,80);

// landing leg lift
if(skater.legLift){
ctx.moveTo(0,50);
ctx.lineTo(25,80);
}

ctx.stroke();

// skate blade
ctx.fillRect(-10,80,20,4);

ctx.restore();
}

/* ---------- PROGRAM ---------- */

const elements=["Axel","Salchow","Toe Loop","Loop","Lutz",
"Axel","Salchow","Toe Loop","Loop","Lutz"];

const questions=[
{q:"Percent within 1 SD?",choices:["68%","95%","99.7%","50%"],correct:0},
{q:"Percent within 2 SD?",choices:["68%","95%","75%","50%"],correct:1},
{q:"Percent within 3 SD?",choices:["90%","95%","99.7%","80%"],correct:2},
{q:"Mean=100 SD=10 → 68%?",choices:["90–110","80–120","70–130","95–105"],correct:0},
{q:"Mean=50 SD=5 → 95%?",choices:["45–55","40–60","35–65","48–52"],correct:1},
{q:"Empirical rule applies to?",choices:["Uniform","Normal","Skewed","Random"],correct:1},
{q:"Beyond 3 SD?",choices:["0.3%","32%","5%","10%"],correct:0},
{q:"Mean=70 SD=5 → 99.7%?",choices:["65–75","60–80","55–85","50–90"],correct:2},
{q:"Between 1–2 SD one side?",choices:["13.5%","34%","47.5%","2.5%"],correct:0},
{q:"Within 2 SD but outside 1 SD?",choices:["27%","13.5%","68%","95%"],correct:0}
];

let current=0;
let jumping=false;

/* ---------- START ---------- */

function startProgram(){
document.getElementById("startScreen").style.display="none";
nextJump();
}

/* ---------- JUMP MOTION ---------- */

function nextJump(){
if(current>=10)return;

performJump();
}

/* realistic jump → pause in air */
function performJump(){

jumping=true;
skater.legLift=false;
skater.fallen=false;

let startY=canvas.height-150;
let peak=startY-200;
let duration=800;
let start=null;

function up(time){
if(!start)start=time;
let p=(time-start)/duration;

if(p<1){
skater.y=startY-(startY-peak)*p;
skater.rotation=720*p; // spin
requestAnimationFrame(up);
}else{
skater.y=peak;
pauseInAir();
}
}
requestAnimationFrame(up);
}

/* ---------- AIR PAUSE ---------- */

function pauseInAir(){
showQuestion();
}

/* ---------- QUESTIONS ---------- */

function showQuestion(){
let q=questions[current];

document.getElementById("questionText").innerText=
elements[current]+" Jump:\n"+q.q;

let c=document.getElementById("choices");
c.innerHTML="";

q.choices.forEach((choice,i)=>{
let b=document.createElement("button");
b.innerText=choice;
b.onclick=()=>answer(i);
c.appendChild(b);
});

document.getElementById("questionBox").style.display="block";
}

function answer(choice){
document.getElementById("questionBox").style.display="none";

if(choice===questions[current].correct){
landClean();
}else{
fall();
}

current++;
setTimeout(nextJump,2000);
}

/* ---------- LAND CLEAN ---------- */

function landClean(){

let ground=canvas.height-150;
let start=skater.y;
let duration=500;
let t0=null;

function down(t){
if(!t0)t0=t;
let p=(t-t0)/duration;

if(p<1){
skater.y=start+(ground-start)*p;
skater.rotation=0;
requestAnimationFrame(down);
}else{
skater.y=ground;
skater.legLift=true; // one-leg landing pose
jumping=false;
}
}
requestAnimationFrame(down);
}

/* ---------- FALL ---------- */

function fall(){

let ground=canvas.height-150;
let start=skater.y;
let duration=500;
let t0=null;

function down(t){
if(!t0)t0=t;
let p=(t-t0)/duration;

if(p<1){
skater.y=start+(ground-start)*p;
skater.rotation=360*p;
requestAnimationFrame(down);
}else{
skater.y=ground;
skater.fallen=true;
jumping=false;
}
}
requestAnimationFrame(down);
}

/* ---------- LOOP ---------- */

function loop(){
drawRink();
drawSkater();
requestAnimationFrame(loop);
}
loop();

</script>
</body>
</html>
