<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Olympic Figure Skating Study Game</title>

<style>
body{
  margin:0;
  overflow:hidden;
  background:black;
}

canvas{
  display:block;
}
</style>
</head>

<body>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

//////////////////////////////
// REALISTIC SKATER PHYSICS
//////////////////////////////

let x = canvas.width/2;
let y = canvas.height*0.78;
let vy = 0;
let jumping = false;
let gravity = 0.7;
let rotation = 0;
let forwardSpeed = 4;

document.addEventListener("keydown", e=>{
  if(e.code==="Space" && !jumping){
    jumping=true;
    vy=-18;
    rotation=0;
  }
});

//////////////////////////////
// DRAW OLYMPIC RINK BACKGROUND
//////////////////////////////

function drawRink(){

  // arena gradient lighting
  const grad = ctx.createRadialGradient(
    canvas.width/2, canvas.height*0.5, 100,
    canvas.width/2, canvas.height*0.5, canvas.width
  );
  grad.addColorStop(0,"#ffffff");
  grad.addColorStop(1,"#dfe7f2");

  ctx.fillStyle=grad;
  ctx.fillRect(0,canvas.height*0.55,canvas.width,canvas.height);

  // ice texture shine
  for(let i=0;i<200;i++){
    ctx.fillStyle="rgba(255,255,255,0.05)";
    ctx.fillRect(Math.random()*canvas.width,
                 canvas.height*0.6+Math.random()*200,
                 2,2);
  }

  // rink boards
  ctx.fillStyle="white";
  ctx.fillRect(0,canvas.height*0.55,canvas.width,40);

  ctx.fillStyle="#f0d000";
  ctx.fillRect(0,canvas.height*0.59,canvas.width,5);

  // glass panels
  ctx.fillStyle="rgba(180,220,255,0.25)";
  for(let i=0;i<canvas.width;i+=40){
    ctx.fillRect(i,canvas.height*0.45,30,80);
  }

  // crowd tiers
  for(let r=0;r<3;r++){
    let yLevel = canvas.height*0.2 + r*50;
    ctx.fillStyle=`rgb(${60+r*20},${60+r*20},${80+r*20})`;
    ctx.fillRect(0,yLevel,canvas.width,50);

    // crowd dots
    for(let i=0;i<300;i++){
      ctx.fillStyle=`hsl(${Math.random()*360},40%,70%)`;
      ctx.fillRect(
        Math.random()*canvas.width,
        yLevel+Math.random()*40,
        2,2
      );
    }
  }

  // arena ceiling
  ctx.fillStyle="#1c2230";
  ctx.fillRect(0,0,canvas.width,canvas.height*0.2);

  // arena lights
  for(let i=0;i<12;i++){
    ctx.beginPath();
    ctx.arc(
      i*(canvas.width/12)+30,
      canvas.height*0.1,
      8,0,Math.PI*2
    );
    ctx.fillStyle="white";
    ctx.fill();

    ctx.fillStyle="rgba(255,255,255,0.15)";
    ctx.beginPath();
    ctx.arc(
      i*(canvas.width/12)+30,
      canvas.height*0.1,
      60,0,Math.PI*2
    );
    ctx.fill();
  }
}

//////////////////////////////
// DRAW SKATER SHADOW
//////////////////////////////

function drawShadow(){
  ctx.beginPath();
  ctx.ellipse(x,canvas.height*0.8,80,20,0,0,Math.PI*2);
  ctx.fillStyle="rgba(0,0,0,0.25)";
  ctx.fill();
}

//////////////////////////////
// REALISTIC FIGURE SKATER BODY
//////////////////////////////

function drawSkater(){

  ctx.save();
  ctx.translate(x,y);

  if(jumping){
    ctx.rotate(rotation*Math.PI/180);
  }

  // dress sparkle gradient
  const dressGrad = ctx.createLinearGradient(0,-120,0,40);
  dressGrad.addColorStop(0,"#7fd6ff");
  dressGrad.addColorStop(1,"#0048ff");

  // head
  ctx.fillStyle="#ffd6b5";
  ctx.beginPath();
  ctx.arc(0,-150,14,0,Math.PI*2);
  ctx.fill();

  // hair
  ctx.fillStyle="#5b3a29";
  ctx.beginPath();
  ctx.arc(0,-155,16,Math.PI,Math.PI*2);
  ctx.fill();

  // torso
  ctx.fillStyle=dressGrad;
  ctx.beginPath();
  ctx.moveTo(-18,-135);
  ctx.lineTo(18,-135);
  ctx.lineTo(10,-70);
  ctx.lineTo(-10,-70);
  ctx.fill();

  // skirt
  ctx.fillStyle="rgba(100,170,255,0.85)";
  ctx.beginPath();
  ctx.moveTo(-30,-70);
  ctx.lineTo(30,-70);
  ctx.lineTo(0,-30);
  ctx.fill();

  // arms
  ctx.strokeStyle="#ffd6b5";
  ctx.lineWidth=6;
  ctx.beginPath();
  ctx.moveTo(-18,-120);
  ctx.lineTo(-45,-90);
  ctx.moveTo(18,-120);
  ctx.lineTo(45,-90);
  ctx.stroke();

  // legs
  ctx.strokeStyle="#ffd6b5";
  ctx.lineWidth=7;
  ctx.beginPath();
  ctx.moveTo(-6,-30);
  ctx.lineTo(-6,50);
  ctx.moveTo(6,-30);
  ctx.lineTo(6,50);
  ctx.stroke();

  // skates
  ctx.fillStyle="white";
  ctx.fillRect(-12,50,12,6);
  ctx.fillRect(0,50,12,6);

  ctx.strokeStyle="#ccc";
  ctx.beginPath();
  ctx.moveTo(-12,56);
  ctx.lineTo(0,56);
  ctx.moveTo(0,56);
  ctx.lineTo(12,56);
  ctx.stroke();

  // sparkles on dress
  for(let i=0;i<6;i++){
    ctx.fillStyle="white";
    ctx.fillRect(
      Math.sin(Date.now()/200+i)*15,
      -110+i*10,
      2,2
    );
  }

  ctx.restore();
}

//////////////////////////////
// UPDATE MOTION
//////////////////////////////

function update(){

  if(jumping){
    vy+=gravity;
    y+=vy;
    x+=forwardSpeed;
    rotation+=10;

    if(y>=canvas.height*0.78){
      y=canvas.height*0.78;
      jumping=false;
      x=canvas.width/2;
    }
  }
}

//////////////////////////////
// DRAW
//////////////////////////////

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawRink();
  drawShadow();
  drawSkater();
}

//////////////////////////////
// LOOP
//////////////////////////////

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();

</script>
</body>
</html>
